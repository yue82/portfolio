<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta name="description" content="神戸大学情報知能工学科 2015年前期 言語工学 講義ページ">
    <meta name="author" content="Takatori">
    <title>言語工学 - 環境テスト</title>
    <link rel="stylesheet" href="./LE.css">
  </head>

  <body>
    <div id="container">
      <div class="header">
	<h1>言語工学 講義ページ　-2015年度 前期-</h1>
	<a href="./index.html">言語工学top</a> &gt 環境テスト（lex）
      </div>	

      <div class="main">
	<hr>	

	<div class="menu">
	  <object onload="loads(this, 'menubody')" type="text/html" width="270px" data="menu.html"></object>	
	</div>
	
	<div class="contents">

	<h3>3. 環境テスト</h3>
	<!-- 環境テスト（lex） -->
	<h4>環境テスト（lex）</h4>
	<ol style="width:550px;">
	  <li>
	    解析対象のファイルを作成します．<br>
	    下記の内容を書いたファイルを「hello.c」という名前で保存してください．<br>
	    ※先日まで，全角スペースが入ってしまっていました．エラーが発生した人は確認してみてください．<br>
            <pre class="code" title="hello.c">if(a&lt;b){c=d;}</pre><br>
	  </li>
	  <li>
	    flexのプログラムを作成します．<br>
	    下記の内容を書いたファイルを「def.l」という名前で保存してください．<br>
	    ※%マークの前にスペースがあるとエラーが起きるようです．<br>
	    ソースコードを変えました，コピー時にも気をつけてみてください ．<br>
	    <pre class="code" title="def.l">
%option noyywrap
%{
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
%}

%%
[ \t\n]+                        {}
&quot;if&quot;                            {
       printf(&quot;IF &quot;);
       }
[a-zA-X_][a-zA-Z0-9]*           {
       printf(&quot;IDENTIFIER &quot;);
       }
&quot;=&quot;                             {
       printf(&quot;OPERATOR &quot;);
       }
&quot;&lt&quot;                             {
       printf(&quot;OPERATOR &quot;);
       }
&quot;)&quot                             {
       printf(&quot;RPAR &quot;);
       }
&quot;(&quot;                             {
       printf(&quot;LPAR &quot;);
       }
&quot;}&quot;                             {
       printf(&quot;RBR &quot;);
       }
&quot;{&quot;                             {
       printf(&quot;LBR &quot;);
       }
&quot;;&quot;                             {
       printf(&quot;SEMI &quot;);
       }
%%
main() {
  yylex();
  printf(&quot;\n&quot;);
  return 0;
}
</pre><br>
	  </li>
	  <li>
	    flexを実行します．<br>
	    <pre class="command">$ flex def.l</pre>
	    lex.yy.c というファイルが生成されます．<br><br>
	  </li>
	  <li>
	    生成されたlex.yy.cをコンパイルします．<br>
	    <pre class="command">$ gcc lex.yy.c</pre>
	    a.out というファイルが生成されます．<br>
	    ※ 環境によっては a.exe というファイルが生成されるかもしれませんが，a.out と同じように扱うことができます．<br>
	    【参考】<a href="http://ja.wikipedia.org/wiki/A.out%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%83%E3%83%88">a.outフォーマット（Wikipedia）</a><br><br>
	  </li>
	  <li>
	    a.out を実行して，結果を出力してみます．<br>
	    <pre class="command">$ ./a.out < hello.c
IF LPAR IDENTIFIER OPERATOR IDENTIFIER RPAR LBR IDENTIFIER OPERATOR IDENTIFIER SEMI RBR</pre>
					     正しく実行出来れば，上記の出力が得られるはずです．
					     </li>
	</ol>

	</div>
	
	<hr>
      </div>

      <footer>
	言語工学 2015<br>
	[<a href="http://www.ai.cs.kobe-u.ac.jp/">CS24 上原研究室</a>]
      </footer>
    </div>
    
    <script>
    function loads(obj, id){
      var Height = obj.contentDocument.getElementById(id).offsetHeight;
      obj.style.height = Height + 50 + "px";
    }
    </script>
  </body>
</html>
